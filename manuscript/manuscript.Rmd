---
title: "Estimating the replicability of psychology experiments after an initial failure to replicate"
author:
  - name: Veronica Boyce
    affiliation: Psych
    footnote:
      - corresp
  - name: Ben Prystawski
    affiliation: Psych
  - name: Adani Abutto
    affiliation: Psych
  - name: Emily Chen
    affiliation: Psych
  - name: Ziwen Chen
    affiliation: GSB
  - name: Howard Chiu
    affiliation: Edu
  - name: Irmak Ergin
    affiliation: Psych
  - name: Anmol Gupta
    affiliation: Psych
  - name: Chuqi Hu
    affiliation: Symsys
  - name: Bendix Kemmann
    affiliation: Philosophy
  - name: Nastasia Klevak
    affiliation: Psych
  - name: Verity Y. Q. Lua
    affiliation: Psych
  - name: Mateus M. Mazzaferro
    affiliation: Edu
  - name: Khaing Mon
    affiliation: Symsys
  - name: Dan Ogunbamowo
    affiliation: Psych
  - name: Alexander Pereira
    affiliation: Philosophy
  - name: Jordan Troutman
    affiliation: CS
  - name: Sarah Tung
    affiliation: Psych
  - name: Raphael Uricher
    affiliation: Psych
  - name: Michael C. Frank
    affiliation: Psych
address:
  - code: Psych
    address: Department of Psychology, Stanford University
  - code: GSB
    address: Graduate School of Business, Stanford University
  - code: Edu
    address: Graduate School of Education, Stanford University
  - code: Symsys
    address: Symbolic Systems Program, Stanford University
  - code: Philosophy
    address: Department of Philosophy, Stanford University
  - code: CS
    address: Department of Computer Science, Stanford University
footnote:
  - code: corresp
    text: "Corresponding author. Email: vboyce@stanford.edu"
bibliography: ["251rescue.bib"] # Replace with one or more of your own bibtex files. Better BibTeX for Zotero is your friend
csl: apa7.csl # Use any CSL style. See https://www.zotero.org/styles for a good list. Ignored if citation_package: natbib
link-citations: TRUE
output:
  bookdown::pdf_document2:
    toc: FALSE
    keep_tex: TRUE
    template: generic_article_template.tex
    #md_extensions: "-autolink_bare_uris"
    number_sections: TRUE
    citation_package: default # Can also be "natbib"
lang: en # Main document language in BCP47 format
geometry: "margin=25mm"
papersize: a4
#linestretch: 2 # for double spacing
endfloat: FALSE # Set to TRUE to turn on latex endfloat package to place figures and tables at end of document
# endfloatoption: # See endfloat documentation for more possibilities
numberlines: FALSE
authblk: TRUE # FALSE = author affiliations in footnotes; TRUE = author affiliations in a block below author names
footnotehyper: FALSE # TRUE will give you enhanced table footnote capabilities. Set to FALSE to be able to use French blocks. Needed due to what appears to be a latex bug.
urlcolor: blue
linkcolor: blue
citecolor: blue
graphics: TRUE # Needed to be able to include images
tables: TRUE # Needed to be able to include tables
# fancyhdr:
#   first:
#     #headleft: "REPORT-NO-XXXX"
#     headright: "Kaplan et al. (2021)"
#     headrulewidth: 0pt
#     #footleft: A left foot
#     footrulewidth: 0pt
#   subsequent:
#     #headleft: "NEXT-PAGE-HEADER-LEFT"
#     headright: "Kaplan et al. (2021)"
#     headrulewidth: 1pt
#     footrulewidth: 0pt
header-includes:
 - \usepackage{tikz}
 - \usetikzlibrary{positioning,chains}
 - \usepackage{setspace}\singlespacing
 - \renewcommand{\textfraction}{0.00}
 - \renewcommand{\topfraction}{1}
 - \renewcommand{\bottomfraction}{1}
 - \renewcommand{\floatpagefraction}{1}
 - \setcounter{topnumber}{3}
 - \setcounter{bottomnumber}{3}
 - \setcounter{totalnumber}{4}
editor_options: 
  markdown: 
    wrap: sentence
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE) # By default, hide code; set to TRUE to see code
#knitr::opts_chunk$set(fig.pos = 'th') # Places figures at top or here
knitr::opts_chunk$set(out.width = '100%', dpi=300,
                      fig.width=8, fig.width=8) # Figure resolution and size
knitr::opts_chunk$set(fig.env="figure") # Latex figure environment

options(knitr.table.format="latex") # For kable tables to work without setting format option

knitr::opts_chunk$set(echo=F, warning=F, message=F)#dev = "png", dev.args = list(type = "cairo-png")
 library("papaja")
library("bookdown")
library("rticles")
 library(here)
 library(tidyverse)
 library(brms)
library(tidybayes)
library(kableExtra)
library(viridis)
library(cowplot)
library(ggthemes)
library(reshape2)
library(knitr)
library(kableExtra)
library(metafor)
#r_refs("r-references.bib", append=F)
theme_set(theme_bw())
options(knitr.table.format = "pdf")

model_location="code/models"

```

```{r}


library(tidyverse)
library(testthat)
all_projects <- read_csv("https://raw.githubusercontent.com/vboyce/251-254-MA/main/data/raw_data.csv")

filtered <- all_projects |>
  mutate(sub_rep=ifelse(replicated_instructor_code==replicated_report_code, 
                 replicated_report_code, 
                 adjudicated_replication_code)) |> 
  filter(sub_rep %in% c(0,.25, .5)) |> 
  filter(include!="no") |> 
  filter(target_N <=200) |> 
  filter(academic_year %in% c("2015-2016", "2016-2017", "2017-2018", "2018-2019", 
                              "2019-2020", "2020-2021","2021-2022", "2022-2023")) 
# what we really want is whether there was a github, but that column is private and so not in the public raw data
# but 2015 is the first year where we have github links

#test_that("number of rows in filtered", {expect_equal(nrow(filtered),49)})

#given this sample, we then sought original replicator permission, 
#since it would involve sharing their repo and write-up with a new student
#which wouldn't have been anticipated at original classtime

#we heard back from 29 students of the 49 we attempted to contact 
#(1 we couldn't contact due to email bouncing) 
#2 responses were negative, rest were positive, for 27 options

approved <- c("krauss2003","yeshurun2003", "daffner2000", "ngo2019",
              "child2018", "schechtman2010", "payne2008", "paxton2012",
              "hart2018", "lewis2015", "tarampi2016", "jara-ettinger2022",
              "porter_2016_1", "hopkins2016", "birch2007_2", "gong2019",
              "correll2007", "pilditch2019", "daw2011", "dehaene2009",
              "sofer2015", "todd2016_1", "chou2016", "mani2013", 
              "haimovitz2016_2", "haimovitz2016_1", "craig2014")
options <- filtered |> filter(target_lastauthor_year %in% approved)

#test_that("number of rows in options", {expect_equal(nrow(options),27)})

# students were then given this list and the opportunity to choose what to do

# projects that we believe are being rescued (as of Oct 23)

chosen <- c("birch2007_2", "jara-ettinger2022", "porter_2016_1",
            "hopkins2016", "yeshurun2003", "craig2014", "tarampi2016", 
            "mani2013", "krauss2003", "schechtman2010", "child2018",
            "haimovitz2016_1", "todd2016_1", "haimovitz2016_2", "payne2008", 
            "paxton2012", "dehaene2009", "chou2016", "ngo2019", "gong2019")

rescue_started <- options |> filter(target_lastauthor_year %in% chosen)

#test_that("number of rows in final sample", {expect_equal(nrow(final_sample),21)})

```

```{r}
d <- read_csv(here("data", "combined_data.csv")) |> 
  select(target_lastauthor_year, type, on_turk, repeated_measure, N, raw_stat, 
         same_direction, replication_score, closeness, subfield, target_year, stanford_internal, 
         open_data, open_materials, within_between, single_vignette, cost, name_pretty)

source(here("code","helper","parse_stats.R"))

parsed_d <- d |> 
  mutate(raw_stat=gsub(" ","",raw_stat),
         calc=pmap(list(raw_stat, within_between,N), do_parsing)) |> 
  unnest(cols=c(calc), names_sep="_") |> 
    mutate(
    calc_d_calc=case_when(
      type=="original" ~ abs(calc_d_calc),
      same_direction=="yes" ~ abs(calc_d_calc),
      same_direction=="no" ~ -abs(calc_d_calc),
      T ~ as.numeric(NA)
      ),
    calc_ES=case_when(
      type=="original" ~ abs(calc_ES),
      same_direction=="yes" ~ abs(calc_ES),
      same_direction=="no" ~ -abs(calc_ES),
      T ~ as.numeric(NA)
      ),
    type=factor(type, levels=c("original", "rep1", "rescue", "additional"))
    ) |> 
  rowwise()

num_proj <- parsed_d |> filter(type=="rescue") |> nrow()

cost <- parsed_d |> filter(type=="rescue") |> ungroup() |>  summarize(total=sum(cost, na.rm=T))
```

<!---------------------- Abstract --------------------->

::: {.abstract data-latex="" lang="en"}
When a replication fails, scientists have to decide whether to make a second attempt or move on. Psychology researchers who attempt to replicate studies often face this decision, given the empirical rate of replication success in psychology, which is lower than desired. Here, we report 17 re-replications of experiments for which an original replication had failed. In 5/17 of these "rescue" projects (29%), the "rescue" study mostly or fully replicated the original results, albeit with a smaller effect size; in the other 12, the second replication was also judged to have failed. We speculate that successful rescue projects were due to larger sample sizes or methodological changes such as attention checks. In the absence of obvious weaknesses in a failed replication study's sample or procedure, however, it may be most efficient to stop pursuing an effect after a single failed replication.
:::
<!-- TODO FIX CITATION / BIB INFO (re OSC for RP:P but only after we unlink from zotero) -->

TODO FIX CITATION / BIB INFO (re OSC for RP:P but only after we unlink from zotero)

<!-- TODO compile everything into OSF repo & link -->
<!-- TODO link individual pre-reg's in repo -->
<!-- TODO link overall pre-reg -->
<!-- TODO include in repo & link the reasons for replication failure that were offered to students -->
<!-- TODO redo/double check closeness scores for first rep and rescues  -->
<!-- TODO add something about Verity's to case-study?  -->
<!-- TODO author contributions, acknowledgements -->

# Introduction

Imagine you are a graduate student, and you run a replication of a study that you are interested in building upon in your research.
The replication fails. Perhaps the interaction you hoped for is directionally correct, but the point estimate is small and the confidence interval definitely overlaps 0, with a $p$-value of .3.
Or perhaps the interaction is numerically in the wrong direction and the main effects look different.
<!--Or maybe the main effect of interest may be null, but you found a significant effect interaction that wasn't hypothesized.-->
Whatever the details of the replication failure, you are left with a question: Should you try again and run a re-replication, or should you give up and pick a different study to extend?

In psychology, large scale replication projects have found that around half of studies successfully replicate. 
Across 100 studies with positive results, the reproducibility project in psychology (RP:P) replicated 36 - 47% depending on the metric for replication success [@openscienceconsortium].
With large multi-site samples, Many Labs 1 replicated 11/13 effects (84.6%), Many Labs 2 replicated 14/28 effects (50%), and Many Labs 3 replicated 3/10 effects (30%) [@klein2014; @klein2018; @ebersole2016].
@camerer2018 examined 21 behavioral social science studies and successfully replicated 12-14 of them (57%-67%) depending on the metric used.
@boyce2023 reported an average subjective replication score of 49% for 176 replications primary in psychology.

Psychology is not the only discipline where many studies do not replicate.
Large scale replication projects in other disciplines have found 39/97 of studies with positive effects (40%) replicating in cancer biology [@errington2021], 11/18 studies (61%) replicating in economics [@camerer2016], and 31/40 studies (78%) replicating in experimental philosophy [@cova2021]. Across these disciplines, and especially in psychology, large-scale replications indicate a substantial chance of scientists encountering failed replications if they try to replicate published findings. 

Replications can fail for many reasons, having to do with the original study or the replication. 
<!-- In principle, any difference between the original study and replication could be a root cause of the difference in their outcomes. But in practice, the relationship between original and replication is not symmetric, and many causes of replication failure can be attributed either more to the original study or more to the replication.  -->
Starting with the original study, one potential reason for replication failure is that the original result is fragile in some way. It could be a statistically unlikely result that was achieved through chance or $p$-hacking, or it could be sensitive to the exact conditions and time it was run under ("hidden moderators"). Another possibility is that the original reported effect size might be inflated due to some combination of heterogeneity, $p$-hacking, low power, and publication bias. A consequence of inflated effect sizes is that replication studies might select a sample size with appropriate sttaistical power for the reported effect size and then have too small a sample to reliably detect the (true) smaller effect. Replication studies might also end up underpowered due to unexpected attrition or noise in the replication sample. 

Other reasons for replication failure are also primarily due to the replication study. 
A replication could observe different results from the original due to methodological differences. 
These differences in design could be intentional adaptations, unavoidable changes from lack of access to the original instructions or materials, or changes that were not expected to be critical. 
A difference in the details of recruitment (e.g., online versus in-person) might mean that particular details of a study implementation would no longer be appropriate, or the data quality controls and attention checks might be inadequate. 
If there are differences in time, place, or subject population between the two studies, corresponding changes to the materials, instructions, or procedure could be needed to provide an adaptation of the experimental paradigm to a new context. 
Such adaptation creates yet more challenges in interpretation: too many changes could cause differing results, but so could not enough changes. 
In sum, when replications fail, we generally do not know why they failed, although we may speculate. 


For the goals of large-scale replication projects, it doesn't matter why any particular study failed to replicate, because the aim is to estimate the proportion of replication effects in a literature. In contrast, howver, when individual scientists attempt to replicate an effect with the goal of building on it, they do care about why an individual replication failed. In an uncertain literature, scientists might not want to commit resources to studying extensions of an effect without first checking that they can measure that effect themselves. For those individual scientists, it is much more important whether the replication failure is due to a fixable issue with the the replication or an intrinsic feature of the original result. 

Re-replication can serve as a way to test explanations for replication failure. While it's possible to speculate after the fact about potential causes of a single replication failure, in most circumstances these causes are hard to discern (absent clear evidence of errors). In contrast, a second replication provides a chance to test explanations by making modifications -- as well as giving another chance for researchers to measure an effect of interest. But what are the chances that a re-replication succeeds?


<!-- is hard to diagnose for certain what made for the difference in the results. An exception might be if a specific error in one study or the other is found, such that the results were not what was thought (analytic error) or the data was not what was thought (experimental error). Aside from these rare cases, we usually can't know whether the replication failure is fixable just by looking at the replication failure itself.  -->


<!-- Re-replication has not been studied much, so it is uncertain how often re-replications recover the results of an original study. That is, it is not well known how definitive a first replication failure is.  -->
Relatively few studies have estimated re-replication success. 
One estimate comes from @ebersole2020. After the original RP:P result of a replication rate around 40% [@openscienceconsortium], @gilbert2016 raised concerns that methodological differences might explain low replication rate. In 11 of the RP:P studies, the original authors had raised concerns about protocol fidelity prior to data-collection.
Of these 11 with concerns, 10 failed to obtain significant results in the RP:P replication. 
Thus, @ebersole2020 re-replicated 10 of these 11 in larger samples, using both the RP:P protocol and a new protocol revised under advice of the original authors or other experts. This study thus tested whether larger sample sizes and/or "better" methodologies would "rescue" the failed RP:P replications.
The result was that 2 of the 10 revised protocols found a significant result (but not the 1/11 that originally was successful).
Even when a significant effect was recovered, the effect size was much diminished [@ebersole2020].
<!-- We could frame @ebersole2020 as an attempt to recover the original effects of the 9 studies with significant original effects and non-significant RP:P effects by a combination of high power and design tweaks. -->
The re-replication success rate was thus 2/9 (22%) for studies with non-significant first replications, under favorable, high-resource circumstances.

<!-- While it is tempting to speculate on the reasons for failed replications, the @gilbert2016 and @ebersole2020 example shows these speculations on causes of replication failure do not always pan out in re-replication outcomes. -->

While @ebersole2020 looked at re-replication success rate in a high resource setting with access to large, multi-site samples and expert input, most early career scientists do not have those kinds of resources to devote to re-replication attempts. On the other hand, early career researchers may also be prone to a different distribution of causes of initial replication failure. Thus, it is an open question what the re-replication rate is for failed replications of early career researchers. Further, estimating this rate could inform researhcers' decisions on what to do next after failed replications. 

Here, we investigate re-replication in the context of graduate student replication class projects.
Students in a graduate methods class on experimental methods in psychology were given the option to "rescue" an experiment that a student in a prior year had previously failed to replicate as their class project [first replications reported in @boyce2023].
The focus of the class was best practices in experimental design; thus, students looked at both the original paper and the failed replication to examine potential issues in the replication that they could fix in their rescue project. 
In the present paper, we report the results of `r num_proj` re-replication rescue projects. We find that a minority of projects (5/17, 29%) successful recovered the original effect. 

# Methods

PSYCH 251 is a graduate-level experimental methods class taught by MCF.
In previous years, students have conducted replication projects [as reported in @boyce2023 and @hawkins2018].
In Fall 2023, students were offered the option to complete a "rescue" project where they re-replicated one of the unsuccessful replications from a previous year.
Students could also opt to do a normal replication instead.
If they opted for a rescue, they were given the option to participate in a collaborative meta-science project and earn authorship on the current paper based on 1) completing a rescue project, 2) reviewing another student's rescue project for analytic errors, and 3) reviewing and approving the final manuscript. 
We report on the result of `r num_proj` rescue projects that opted to be part of the paper and completed data collection.

A spreadsheet of projects, individual project write-ups (both first replications and rescues), links to individual project data and analyses for rescue projects, and the analytic code for this paper are all available at TODO OSF LINK GOES HERE.

Our analysis plan was pre-registered after students had selected projects, but before final data collection on the projects.
Each project was also individually pre-registered by the student conducting it.
The overall analysis is at LINK, individual pre-registrations are linked from LINK.
We note one deviation from our pre-registration here: we pre-registered visual comparisons between original, first replication, and rescue projects using prediction intervals.
Prediction intervals depend on both the original effect size and variance and the variance of the comparison (replication or rescue) study [@patil2016].
Thus we cannot show a single prediction interval for the original study, but would have to show a prediction interval between each pair of studies. We thought this analysis would not offer additional clarity and hence we did not perform it. 

## Sample

The experiments that were re-replicated were chosen from studies that failed to replicate in @boyce2023.
We created an initial list of `r nrow(filtered)` rescue-eligible studies that 1) had received a subjective replication success score of 0, .25 or .5 (on a 0--1 scale) in @boyce2023, 2) had a Github repository available (github repositories were used in class starting in academic year 2015-2016), and 3) where the original experiment had 200 or fewer participants (to ensure we could afford to match or increase the sample size based on the class budget).
We then contacted the replication project authors for permission to share their report and repository with a new student and include it as a supplement on a resulting paper.
This left `r length(approved)` options for the students to choose from.
`r length(chosen)` students chose to do rescue projects, and
`r length(chosen)-num_proj` students did not finish their project or did not indicate interest in being part of this paper, leaving a final sample of `r num_proj` rescue projects.

```{r}
rel_size <- parsed_d |> filter(type %in% c("original", "rescue")) |> select(target_lastauthor_year, type, N)  |> 
  pivot_wider(names_from=type, values_from=N) |> mutate(multiplier=rescue/original)

lowest <- quantile(rel_size$multiplier, 0)
low <- quantile(rel_size$multiplier, .25)
mid <- quantile(rel_size$multiplier, .5)
m <- mean(rel_size$multiplier)
high <- quantile(rel_size$multiplier, .75)
highest <- quantile(rel_size$multiplier, 1)

```

## Procedure

Students conducted their rescue projects over the course of the 10-week class.
Once they had chosen a project we gave them access to the original replicators' write-up and repository, which often included the data, experiment code, and analytic code.
In many cases, students were also given the contact information of the original replicator (a few original replicators opted not to be contacted by students).

Students were required to think of reasons the first replication might not have worked, and address them if they could.
A list of possible reasons and solutions TODO LINK was given to students.
In general, we encouraged students to add manipulation checks as appropriate, and to adapt their materials to online studies, which may benefit from attention checks and/or shorter duration.
For instance, the rescue of @paxton2012 switched from using the cognitive reflection task (CRT) which many online participants are over-familiar with for the newer CRT-2 which is less overused but attempts to measure the same construct [@thomson2016].
The rescue of @jara-ettinger2022 discovered that the replication had accidentally used an illustrated version of the stimuli rather than the photographic stimuli used in the original and used the photographic stimuli instead.
@tarampi2016 had participants do a timed navigation task where they wrote L or R to indicate which way to turn at each intersection on a paper map. The replication ported this experiment online and had participants click a drop down menu to select left or write for each turn. The rescue removed the unwieldy dropdown menus and opted to have participants press keys on the keyboard to indicate the direction of a turn, which seemed like a more natural interface.
Once experimental designs and analytic plans were approved by class TAs (VB and BP), students pre-registered and ran their samples.

With one exception, samples were collected on Prolific [the rescue of @yeshurun2003 ran in-person on the Stanford student subject pool].
We tried to power studies adequately [with a target of 2.5x original following @simonsohn2015], but due to cost constraints, not all studies were powered at this level.
The rescues had on average `r round(m,2)` times the original sample post-exclusion (median: `r round(mid,2)`, IQR: `r round(low,2)` - `r round(high,2)`, minimum: `r round(lowest, 2)`, maximum: `r round(highest,2)`, see Table \@ref(tab:tab-size) for all sample sizes).
Across the `r num_proj-1` Prolific studies, we spent \$`r pluck(cost,1,1) |> round()`, for an average of \$`r (pluck(cost,1,1)/(num_proj-1)) |> round()` per project.

## Coding of results

We followed @boyce2023 in the properties of the studies we measure and how we quantify replication success. 
Each project was rated on the basis of subjective replication success (on a 0--1 scale) by both MCF and one of VB and BP.
We thought about replication in terms of general match in key study results (direction, magnitude, and significance), rather than focusing on any singular numeric result or significance cut-off.
Interrater reliability was `r irr |> round(3)`; disagreements were minor (at no point greater than .25) and were resolved through discussion.

As a complement to the subjective rating of overall success, we statistically compared one key measure of interest for each study, following @boyce2023. In order to statistically compare the key measures, we needed effect sizes reported in the same way for each original study, first replication, and rescue.
When effects were not reported in consistent ways across original and replications, we recalculated effects from raw data when necessary to obtain comparable values.

We recorded the same set of potential correlates that were used in @boyce2023 for original, first replication, and rescue (these were already rated for original and first replication).
These potential correlates included the subfield of the study (cognitive, social, or other psychology), its publication year, experimental design features including whether it was a within- or between-subject design, whether each condition was instantiated with one vignette or multiple, how many items each participant saw, and whether there were open materials and open data.

For the original study and each replication, we recorded the number of participants post-exclusions.
For studies where some extra conditions were dropped in some replications, we counted only the participants in the key conditions all replications had for comparability.
For instance, if an original study compared between two critical conditions but also had a baseline control, we did not count the participants in the baseline condition if a replication did not include this condition.
We also recorded whether each study was conducted online using crowd-sourced platform or not.

# Results

## Overall replication rate

<!-- When a replication fails to obtain the same results, one may have intuitions about what may have gone wrong -- these rescue projects test how often addressing these potential issues in fact works. -->

```{r}
subj <- parsed_d |> filter(type=="rescue") |> mutate(binary_success=ifelse(replication_score>.5,1,0))

tallied <- subj|> group_by(replication_score) |> tally()

success <- filter(subj, binary_success==1)

d <- read_csv(here("data", "combined_data.csv")) |> filter(type=="rescue") 

irr <- cor.test(d$TA_rep_score, d$MCF_rep_score, method="spearman")$estimate

bootstrap <- subj$binary_success |> Hmisc::smean.cl.boot()
```

```{r}
boyce2023_sample <- read_csv(here("data/boyce_2023_data.csv")) |> select(sub_rep)

percent_rep <- boyce2023_sample |> mutate(is_rep=ifelse(sub_rep>.5,1,0)) |> summarize(m=mean(is_rep))

overall <- (percent_rep[1])+(1-percent_rep[1])*nrow(success)/nrow(subj)
```


```{=html}
<!--* We will report the distribution of subjective replication success in our rescue sample

* If there is a mixture of projects that succeed and fail to replicate the original results, we will qualitatively describe differences that may have played a role. -->
```

Our primary question of interest was how many of the `r num_proj` rescue projects succeeded at replicating the results in the original study.
Across the `r nrow(subj)` rescue projects, `r nrow(success)` mostly or fully replicated the original results according to the subjective replication ratings.
`r pluck(tallied,2,1)` had a rating of 0, `r pluck(tallied, 2,2)` got a rating of .75, and `r pluck(tallied, 2,3)` got a rating of 1.
Thus, a first pass answer to the question "how often can a failed replication be salvaged?" is `r round(nrow(success)/nrow(subj)*100)`% (bootstrapped 95% CI: `r round(bootstrap[2]*100)`% - `r round(bootstrap[3]*100)`%) of the time.

In the original replication sample from @boyce2023, `r boyce2023_sample |> filter(sub_rep>.5) |> nrow()` out of `r boyce2023_sample |> nrow()` replications (`r round(percent_rep*100)`%) mostly or fully replicated (i.e. received a subjective replication score of .75 or 1).
Note that @boyce2023 report the average replication score as a percent success (49%), but given that we considered studies with a subjective score of .5 as eligible to be rescued, we recomputed the success rate where scores of 0, .25, and .5 are considered failures and .75 and 1 successes.
If the re-replication rate in our sample is representative of the re-replication rate for the initially non-replicating studies, then the combined chance of mostly or fully replicating in a first replication or one follow-up replication is `r round(overall*100)`%.


## Effect size comparison

```{r smd, fig.cap="Standardized effect sizes of original studies, first replications, rescues, and additional replications if available. Due to the large effect size of a couple studies, large effect studies are shown in a separate panel. In a few cases, the first replication's key effect was non-zero in the same direction as the original; however, in these cases the larger pattern of results was not fully consistent between original and first replication.  "}


#test on just one
colors <- c("Original study"="black", "First replication"="#377EB8", "Rescue"="#E41A1C", "Additional replication"="#984EA3")
shape <- c("Original study"=21,"First replication"=22,"Rescue"=23,"Additional replication"=24)

big <- parsed_d |> filter(type=="original") |> filter(calc_d_calc>1|target_lastauthor_year=="yeshurun2003") |> select(target_lastauthor_year)
for_plotting_d <- parsed_d |> filter(!is.na(calc_d_calc)) |> 
  mutate(point=calc_d_calc, low=calc_d_calc-1.96*calc_d_calc_se, high=calc_d_calc+1.96*calc_d_calc_se) |> 
  mutate(type=case_when(
    type=="original" ~ "Original study",
    type=="rep1" ~ "First replication",
    type=="rescue" ~ "Rescue",
    type=="additional" ~ "Additional replication"
  ),
  type=factor(type, levels=c("Original study", "First replication", "Rescue", "Additional replication")))



smd_scale_small <- ggplot(for_plotting_d |> anti_join(big),aes(x=reorder(name_pretty, point, FUN=max),y=point,ymin=low,ymax=high,shape=type, color=type, fill=type, group=desc(type)))+
  geom_errorbar(size=.5,width=0, position=position_dodge(width=.5))+
  geom_point(position=position_dodge(width=.5))+
 coord_flip()+
  scale_size_area()+
  geom_hline(yintercept=0,color="black")+
    scale_color_manual(values=colors, aesthetics=c("color", "fill"))+
  scale_shape_manual(values=shape)+
  theme(legend.position = "bottom", 
        panel.grid.major.x = element_blank(), 
        panel.grid.minor.x=element_blank()
        )+
  labs(y="Standarized mean difference", x="")

level_order = c("Yeshurun & Levy 2003",
                "Ngo et al. 2019", 
                 "Krauss & Wang 2003",
                 "Jara-Ettinger et al 2022")
smd_scale_big <- ggplot(for_plotting_d |> inner_join(big) |> 
                          mutate(name_pretty=factor(name_pretty, levels=level_order)), aes(x=name_pretty,y=point,ymin=low,ymax=high,shape=type, color=type, fill=type, group=desc(type)))+
  geom_errorbar(size=.5,width=0, position=position_dodge(width=.5))+
  geom_point(position=position_dodge(width=.5))+
 coord_flip()+
  scale_size_area()+
  geom_hline(yintercept=0,color="black")+
    scale_color_manual(values=colors, aesthetics=c("color", "fill"))+
    scale_shape_manual(values=shape)+
  theme(legend.position = "none", 
        panel.grid.major.x = element_blank(), 
        panel.grid.minor.x=element_blank()
        )+
  labs(y="Standarized mean difference", x="")

#smd_scale_big
#smd_scale_small

plot_grid(smd_scale_big, smd_scale_small, rel_heights=c(.4,1), nrow=2)
```

As a complement to subjective replication ratings, we also statistically compared the effect sizes of the rescue, first replication, and original study on one preregistered key measure per study [again following @boyce2023].
Though we did not conduct a systematic review of the literature to identify all possible replications, we also consider the effect sizes obtained in additional replications when we were aware of them (either from other class projects, or external replications in the literature), 

We standardized all effect sizes into standardized mean difference (SMD) units.
One potential issue with comparisons using SMD is that noisier measures will have smaller standardized effect sizes even if the effect on the original scale is the same.
In general, the replication and rescue effect sizes were smaller than the original effect sizes, and in a few cases the effects were in the opposite direction (Figure \@ref(fig:smd)).

```{r}

do_d_rma <- function(df) {
  if(!any(is.na(df$d))){
  r<- rma(yi=df$d, sei=df$d_se, slab=df$type)
  return(tibble(rma_d_est=r$beta[,1], rma_d_se=r$se))
  }
  return(tibble(rma_d_est=NA, rma_d_se=NA))

}


do_p_orig <- function(es, es_se, rep_es, rep_se){
  if(!is.na(es)&!is.na(es_se)&!is.na(rep_es)&!is.na(rep_se)){
    return(Replicate::p_orig(es, es_se**2,rep_es, t2=0.21**2, rep_se**2))
  }
  return(NA)
}

orig <- parsed_d |> filter(type=="original") |> select(target_lastauthor_year, d=calc_d_calc, d_se=calc_d_calc_se)

orig_v_others <- parsed_d |> select(target_lastauthor_year, type, d=calc_d_calc, d_se=calc_d_calc_se) |> 
  filter(type!="original") |> 
  group_by(target_lastauthor_year) |> 
  nest() |> 
  mutate(d_rma_result=map(data, do_d_rma)) |> 
  unnest_wider(d_rma_result) |> 
  left_join(orig) |> 
  rowwise() |> 
  mutate(d_p_orig=do_p_orig(d, d_se, rma_d_est, rma_d_se))

orig_v_rescue <- parsed_d |>   filter(type=="rescue") |> 
  select(target_lastauthor_year, type, res_d=calc_d_calc, res_d_se=calc_d_calc_se) |> 
  left_join(orig) |> 
  rowwise() |> 
  mutate(d_p_orig=do_p_orig(d, d_se, res_d, res_d_se))


orig_v_not_rescue <- parsed_d |> select(target_lastauthor_year, type, d=calc_d_calc, d_se=calc_d_calc_se) |> 
  filter(type!="original", type!="rescue") |> 
  group_by(target_lastauthor_year) |> 
  nest() |> 
  mutate(d_rma_result=map(data, do_d_rma)) |> 
  unnest_wider(d_rma_result) |> 
  left_join(orig) |> 
  rowwise() |> 
  mutate(d_p_orig=do_p_orig(d, d_se, rma_d_est, rma_d_se))

rescue_only <- parsed_d |> filter(type=="rescue") |> select(target_lastauthor_year, d=calc_d_calc, d_se=calc_d_calc_se)

rescue_v_reps <- parsed_d |> select(target_lastauthor_year, type, d=calc_d_calc, d_se=calc_d_calc_se) |> 
  filter(type!="original", type!="rescue") |> 
  group_by(target_lastauthor_year) |> 
  nest() |> 
  mutate(d_rma_result=map(data, do_d_rma)) |> 
  unnest_wider(d_rma_result) |> 
  left_join(rescue_only) |> 
  rowwise() |> 
  mutate(d_p_orig=do_p_orig(d, d_se, rma_d_est, rma_d_se))

 all <- orig_v_others |> select(target_lastauthor_year, orig_v_other=d_p_orig) |> 
  left_join(orig_v_rescue |> select(target_lastauthor_year, orig_v_rescue=d_p_orig)) |> 
  left_join(orig_v_not_rescue |> select(target_lastauthor_year, orig_v_not_rescue=d_p_orig)) |> 
  left_join(rescue_v_reps |> select(target_lastauthor_year, rescue_v_reps=d_p_orig)) 

main_summ <- all |> ungroup() |> select(orig_v_other) |>
  summarize(median=median(orig_v_other, na.rm=T),
            low=quantile(orig_v_other, .25, na.rm=T),
            high=quantile(orig_v_other, .75, na.rm=T),
            less_than=sum(orig_v_other<.05, na.rm=T)/sum(!is.na(orig_v_other)))

rescue_summ <- all |> ungroup() |> select(orig_v_rescue) |>
  summarize(median=median(orig_v_rescue, na.rm=T),
            low=quantile(orig_v_rescue, .25, na.rm=T),
            high=quantile(orig_v_rescue, .75, na.rm=T),
            less_than=sum(orig_v_rescue<.05, na.rm=T)/sum(!is.na(orig_v_rescue)))

rep_summ <- all |> ungroup() |> select(orig_v_not_rescue) |>
  summarize(median=median(orig_v_not_rescue, na.rm=T),
            low=quantile(orig_v_not_rescue, .25, na.rm=T),
            high=quantile(orig_v_not_rescue, .75, na.rm=T),
            less_than=sum(orig_v_not_rescue<.05, na.rm=T)/sum(!is.na(orig_v_not_rescue)))

rescue_rep_summ <- all |> ungroup() |> select(rescue_v_reps) |>
  summarize(median=median(rescue_v_reps, na.rm=T),
            low=quantile(rescue_v_reps, .25, na.rm=T),
            high=quantile(rescue_v_reps, .75, na.rm=T),
            less_than=sum(rescue_v_reps<.05, na.rm=T)/sum(!is.na(rescue_v_reps)))
```

```{r tab-porig}
names <- parsed_d |> select(target_lastauthor_year, name_pretty) |> unique()

all |> ungroup() |>  left_join(names) |> select(Paper=name_pretty, `All reps`=orig_v_other, "Rescue" = orig_v_rescue, "Non-rescue"=orig_v_not_rescue, "Other reps"=rescue_v_reps) |> knitr::kable(format="latex", booktabs=T, linesep="", caption="P-original values between different sets of experiments. The primary analysis is between the original result and the meta-analytic aggregation of all replications. All p-originals assume an imputed heterogeneity value of tau=.21.", digits=3) |> 
  add_header_above(c(" "=1, "Original and"=3, "Rescue and"=1)) |> add_header_above(c(" "=1, "P-original comparing between"=4))

  
```

Scientists' intuitions about whether a replication is successful and whether an effect provides support for a hypothesis (including heuristic cutoffs like p\<.05) do not always align with measures of statistical consistency [@patil2016].
For instance, two studies may both find that condition 1 results in a significantly higher outcome measure than condition 2, but the effect magnitudes may be sufficiently different that they are statistically unlikely to have come from the same population.
On the other hand, one study may find a statistically significant, but imprecisely estimated effect in a small sample, and second study may find a near-zero (null) effect, but the effect estimates from the two studies may be statistically compatible, despite one supporting a hypothesized difference and the other not.

<!-- MCF: I wonder if this para needs to go in the methods?  -->

Here, we measure statistical consistency using $p$-original, the $p$-value on the null hypothesis that one study's population effect comes from the same distribution of population effects as another study or studies [@mathurNewStatisticalMetrics2020a] If we assume no heterogeneity between studies, then this is the same as asking how consistent one study's estimate of the population-level effect is with another study's estimate of the population-level effect.
However, meta-analyses of closely related studies, such as those from different sites of multi-site replications, indicate that there is often heterogeneity between studies.
$p$-original allows for such heterogeneity, as governed by a parameter $\tau$.
We cannot accurately estimate the level of heterogeneity for an effect meta-analytically as we have only a small number of replications per study.
Instead, we impute a heterogeneity value of $\tau=.21$ SMD, which is the average level of heterogeneity found by @olsson-collentine2020 in prior multi-site replications in psychology.

As our primary comparison, we compare the effect size of the original study to the meta-analytic effect of the totality of the replications (first replication, rescue, and additional if found).
The value of $p$-original thus represents how likely an effect size equal to or more extreme than the original effect size is to occur if it comes from a distribution of population effect sizes defined by the mean and standard error of the replications (combined meta-analytically) with a between-population standard deviation of $\tau=.21$.
That is, it $p$-original is a measure of the statistical consistency of the original result with the totality of the replications, assuming a given level of heterogeneity of effects between studies.
Smaller $p$-original values indicate more inconsistency.

The median value of $p$-original between an original study and its replications was `r main_summ$median |> round(2)` [IQR: `r main_summ$low |> round(2)` - `r main_summ$high |> round(2)`].
`r round(main_summ$less_than*100)`% of the $p$-original values were less than .05, indicating by conventional thresholds a rejection of the null hypothesis that the original comes from the same distribution of population effects as the replications.
Individual $p$-original values for each study are shown in Table \@ref(tab:tab-porig).

As secondary measures, we calculated the $p$-original values between a) the original and the rescue, b) the original and non-rescue replications, and c) the rescue and other replications.
For a) the original versus the rescue, median value of $p$-original was `r rescue_summ$median |> round(2)` [IQR: `r rescue_summ$low |> round(2)` - `r rescue_summ$high|> round(2)`], and `r round(rescue_summ$less_than*100)`% of the $p$-original values were less than .05.
For b) the original versus all the non-rescue replications, median value of $p$-original was `r rep_summ$median |> round(2)` [IQR: `r rep_summ$low |> round(2)` - `r rep_summ$high |> round(2)`], and `r round(rep_summ$less_than*100)`% of the $p$-original values were less than .05.
For c) the rescue versus the other replications, median value of $p$-original was `r rescue_rep_summ$median |> round(2)` [IQR: `r rescue_rep_summ$low |> round(2)` - `r rescue_rep_summ$high |> round(2)`], and `r round(rescue_rep_summ$less_than*100)`% of the $p$-original values were less than .05.

<!--Visualizations of the statistical consistency between the original and each replication are shown in TODO FIGURE. The range around the open circle is the 95% predictive interval, representing the interval where, assuming that both are drawn from the same distribution, the replication will fall 95% of the time, given the precision (standard deviation) of the replication [@patil2016]. We again impute a heterogeneity value of $\tau=.21$ SMD for the construction of the prediction intervals.-->

<!--* We will use p-original to evaluate how consistent the original effect size is with the totality of replications. We expect there to be a small number of replications, so we will impute the heterogeneity value as in https://osf.io/preprints/psyarxiv/dpyn6/. -->

Overall, allowing for a heterogeneity level of $\tau$=.21 SMD, a number of original effects are not statistically consistent with rescues and replication effects.
The pattern of inconsistency does not align with which studies were rated as having replicated.
In all cases, the point estimate of the re-replication is smaller than, or in the opposite direction of, the original effect on the key measure of interest.

```{r}
do_d_predInt_het <- function(df){
  if(!is.na(df$d)&!is.na(df$d_se)&!is.na(df$rep_d)&!is.na(df$rep_d_se)){
    yio=df$d
    vio=df$d_se**2
    yir=df$rep_d
    vir=df$rep_d_se**2
    t2=.21**2
    pooled.SE = sqrt(vio + vir + t2)
    PILo.sens = yio - qnorm(0.975) * pooled.SE
    PIHi.sens = yio + qnorm(0.975) * pooled.SE
    PIinside.sens = (yir > PILo.sens) & (yir < PIHi.sens)
    return(tibble(d_low=PILo.sens, d_high=PIHi.sens, d_inside=PIinside.sens))
  }
  return(tibble(d_low=NA,d_high=NA, d_inside=NA))
}

```

```{r}
orig <- parsed_d |> filter(type=="original") |> select(target_lastauthor_year, d=calc_d_calc, d_se=calc_d_calc_se, es=calc_ES, es_se=calc_SE)

predInts_het <- parsed_d |> 
  filter(type!="original") |> 
  group_by(target_lastauthor_year, name_pretty) |> 
  select(target_lastauthor_year, type, rep_d=calc_d_calc, rep_d_se=calc_d_calc_se, rep_es=calc_ES, rep_es_se=calc_SE) |> 
  left_join(orig) |> 
  group_by(target_lastauthor_year,type) |> 
  nest() |> 
  mutate(d_pred_int=map(data,do_d_predInt_het)) |> 
  unnest_wider(d_pred_int) |> 
  unnest_wider(data)


```

## Correlates of rescue success

```{r cor-table}

original <- parsed_d |> filter(type=="original") |> 
  rename_with(~str_c("original_",.), .cols=-target_lastauthor_year)

rep1 <- parsed_d |> filter(type=="rep1") |> select(target_lastauthor_year, rep_N=N)

for_cor <- subj |> left_join(original) |> left_join(rep1) |> 
  mutate(
  social=ifelse(subfield=="social", 1,0),
  other_psych=ifelse(subfield=="other-psych",1,0), 
  is_within=ifelse(within_between=="within", 1,0), 
  change_platform=ifelse(on_turk==original_on_turk, 0,1),
  log_trials=log(repeated_measure),
  log_sample=log(N),
  log_ratio_ss=log(N/original_N),
  rep_1_log_sample=log(rep_N),
  log_ratio_rep1_orig=log(rep_N/original_N),
  log_ratio_rescue_rep1=log(N/rep_N),
  open_data=ifelse(open_data=="yes",1,0),
  open_mat=ifelse(open_materials=="yes", 1,0),
  stanford=ifelse(stanford_internal=="yes",1,0)) |> 
  filter(!is.na(replication_score))


sub_cor <- function(var, stat = "estimate") {
  if (stat == "estimate") {
    cor.test(for_cor$replication_score, pull(for_cor, {{var}}))$estimate
  } else {
    cor.test(for_cor$replication_score, pull(for_cor, {{var}}))$p.value
  }
}


preds <- c("open_data",  "open_mat", "stanford", "change_platform", 
           "log_ratio_ss", "is_within", "single_vignette", "log_sample", 
           "log_trials", "social", "other_psych", "rep_1_log_sample", "log_ratio_rep1_orig", "log_ratio_rescue_rep1")

cors <- tibble(preds = preds) |>
  mutate(r = sapply(preds, function(x) sub_cor(x, stat = "estimate")),
         p = sapply(preds, function(x) sub_cor(x, stat = "p"))) |> 

  mutate(Predictors=factor(preds, levels=c("social", "other_psych", "is_within", "single_vignette", "change_platform", "open_data", "open_mat", "stanford", "pub_year", "log_trials", "log_sample", "log_ratio_ss", "rep_1_log_sample", "log_ratio_rep1_orig", "log_ratio_rescue_rep1"), labels=c("Social", "Other psych", "Within subjects", "Single vignette", "Switch to online", "Open data", "Open materials", "Stanford", "Publication year", "Log trials", "Log original sample size", "Log rescue/original sample size", "Log replication sample size", "Log replication/original sample size", "Log rescue/replication sample size"))) |> arrange(Predictors) |> select(Predictors, r, p)

library(kableExtra)
knitr::kable(cors, digits = 3, align='rcc', format="latex", booktabs=T, linesep="", caption="Correlations between an individual predictor and the subjective replication score of the rescue project. The first set of predictors were pre-registered based on the correlates used in Boyce et al. (2023). The last three predictors were added post-hoc.") |> row_spec(11, hline_after=T)


```

Are there signals in the features of original or replication studies that predict whether a re-replication will succeed? To address this question, we report correlations between the set of predictor variables used in @boyce2023 and the subjective replication scores of the rescues.
We also added some (non-preregistered) predictors related to the sample size of the first replication, after seeing the successful re-replications of @ngo2019 and @krauss2003, both of which had small replication samples and larger rescue samples.

All of the correlations are presented in Figure \@ref(tab:cor-table).
The number of rescues is small, and many of these predictors are correlated, so we caution against over interpretation. 

The strongest correlates of rescue success were open materials, a small sample size on the first replication, a small sample size on the first replication relative to the original sample size, and a large rescue sample size relative to the first replication.
None of the pre-registered correlates meet the conventional significance threshold; the two correlates based on ratios that reflect a relatively smaller replication sample size are marginally significant.

Small replication samples relative to original and rescue could be due to both a) powering a replication according to a reported large effect size or b) difficulties with recruitment or high exclusion rates leading to a smaller than intended sample.
Since relative sizes of the studies may play a role in replication success and how probative replications are, we show the sample sizes in Table \@ref(tab:tab-size).

An additional factor that influences the interpretation of a replication is how close the replication's methods were to the original.
In the rescue projects, we aimed to have methods be as close as was feasible or appropriate. However, rescue projects varied in how close the re-replications actually were, often due to limitations in the availability of original stimuli and original instructions, in addition to the use of primarily online subject pools.
Table \@ref(tab:tab-size) shows the closeness of each first replication and rescue according to the classification scheme from @lebel2018.
<!-- TODO CLOSENESS NUMBERS SHOULD BE DOUBLE CHECKED AND FIRST REPS REVISED AS NEEDED -->

```{r tab-size}
parsed_d |> select(name_pretty, type, N, closeness, replication_score) |> 
  filter(type!="additional") |> 
  pivot_wider(names_from="type", values_from=c(N, closeness, replication_score)) |> 
  select(paper=name_pretty, replication_score_rescue, N_original, N_rep1, N_rescue,
         "Replication \\\\  closeness"=closeness_rep1, closeness_rescue) |> arrange(replication_score_rescue|> desc()) |> knitr::kable(align="lllll", format="latex", booktabs=T, linesep="", caption="Comparison of sample size for original, replication, and rescue samples and measures of closeness for replication and rescue samples.", col.names=c("", "", "Original", "Replication", "Rescue", "Replication", "Rescue")) |> add_header_above(c("Paper"=1, "Score"=1, "N"=3, "closeness"=2)) 

```

Overall, we do not have a clear picture of why certain studies replicated in the rescue sample and others did not, other than a few cases where fixing sample size issues may have helped.

## Case studies

Given the mix of successful and unsuccessful rescues, we discuss a few projects where we have speculations about why they turned out the way they did.

The rescue of @krauss2003 was successful despite an unsuccessful replication.
This study looked at the influence of a guided thinking on whether or not people gave correct justifications (drawn or written) for their answer on the Monty Hall problem.
The original paper reported correct justification from 2/67 (`r round(2/67*100)`%) in the control condition and 13/34 (`r round(13/34*100)`%) in the guided thinking condition.
The first replication struggled to recruit participants who were naive to the problem (an exclusion criterion), and many participants give very short text responses in the provided text box (only textual responses were allowed).
The replication found 0/8 correct justifications in the control and 0/11 in the guided thinking condition.
While we can't know for sure what caused the non-replication, there were clear problems observable from the small final sample and low-quality responses.
The rescue targeted these issues by adding a pre-screening that ensured participants were not familiar with the Monty Hall problem, switched the name of the problem (to reduce googling for answers), and had participants upload drawings for their justifications.
Collectively, we believe these changes brought the rescue closer to the intent of the original.
The rescue had 1/40 (`r round(1/40*100)`%) correct justifications in the control group and 6/35 (`r round(6/35*100)`%) in the guided thinking group.
This effect was significant, though smaller than the effect in the original. 

@ngo2019 was a second successful rescue. The original study found a large effect; hence the first replication, powering for 80% power on the reported effect, recruited a small sample of 12 people. This small study failed to find the original effect.
The rescue, powered using 2.5x the original sample [as recommended by @simonsohn2015], recovered a clear effect (albeit a much smaller one).
There are reasons to think that some effect sizes in the literature may be inflated [@openscienceconsortium, @camerer2018], and it is also possible that changes to experiments or switches to online could result in noisier samples and thus smaller effect sizes.
Therefore, replications with smaller samples than the original (even if powered to the original effect size), may not be very diagnostic, and could potentially benefit from a re-replication.

Not all rescues of small replications succeeded, however.
@payne2008 was a study of the effects of sleep on memory consolidation. They  showed participants a number of images and then hours later (after either sleep or no sleep) measured their recall for parts of the images.
The first replication struggled to recruit participants to complete a followup session after sleep and only reported a sample size of 23 (the original had 48).
The rescue attempted to recruit a larger sample (target 88), but also experienced difficulties getting participants to complete the second part of the experiment 12 hours after the first, managing also only to recruit 23 people.
The lesson here may be that sleep research is difficult to conduct online.
However, an online replication by @denis2022 reports qualitatively similar (but quantitatively smaller) results to @payne2008 on related but not identical measures.

\@child2018 studied reading times for passages of text with different emotional valences written from either a third-person or second-person perspective.
They found a significant interaction between perspective and valence: participants read positively-valenced passages faster than negatively-valenced passages, but only when they were written from a second-person perspective.
The first replication used a similar sample size to the original study (40) and found an effect that trended in the same direction, but was substantially smaller.
The rescuer identified several possible reasons for this failure, foremost among them that the replication was conducted online while the original was conducted in person.
It is reasonable to expect online studies of reading time to be noisier than in-person studies because the environments participants completed the study in varied much more online.
The rescue attempt was still online, but used a much larger sample size to account for noisier data.
Still, the rescue found a non-significant effect that trended in the opposite direction from the original and first replication.
Even though the first replication trended in the same direction and there was an identifiable reason for the smaller effect size, increasing sample size did not rescue the effect.

# Discussion

Faced with a failed replication, should investigators devote more time to continued replications? There are limited data that inform this decision. 
To address this gap, we presented the results of `r num_proj` new replications that attempted to "rescue" previous failed replications by identifying and ameliorating possible causes of non-replication.
`r nrow(success)` of these rescue projects (`r round(nrow(success)/num_proj*100)`%) mostly or fully replicated the original results.


In some cases, increasing sample size and fixing internal validity issues in the replication seems to have led to a successful rescue (although we can't establish causality even in these cases).
However, there were other cases where the first replications had issues with a small sample or deviations in the implementation, and the rescue addressed these issues but still failed to replicate the original results.
We can't predict what replication failures are likely to resolve given another, more thoughtful try, beyond the suggestion to review studies for best practices in experimental design and sampling [e.g., @frank2024].

The rescues all showed smaller effect sizes than their original studies, regardless of whether the pattern of effects replicated.
A large minority of replications had effect sizes that were statistically inconsistent with the original effect, even accounting for expected levels of heterogeneity between studies.
These diminished and inconsistent effects suggest that even if a re-replication "works", it may be difficult to build upon as follow-up studies will need large samples to detect small effects.

The reported rescue projects are a small sample of replications, leading to highly uncertain estimates. 
They are also chosen non-randomly, as they have been selected for twice based on student interest -- once for the original replication and again for the rescue.
However, this selection bias is likely to correlate with how graduate students and other early career researchers choose what topics to work on and what studies to build on.
Nevertheless, our estimate is still broadly consistent with that of ManyLabs 5 [29% vs. 22%; @ebersole20202]

In cases where re-replications failed, we do not believe any conclusions are licensed about the status of the original results.
Students conducting rescue projects put substantial effort into trying to set up rescues that had a good chance of success, but projects were constrained by budget limitations, a short timeline, and the constraint that most data collection needed to occur online.
These limitations are representative of the sort of resource limitations often faced by early-career researchers.
That said, it is possible that different results might be obtained in better-resourced settings, by scientists with more expertise and more time.
<!-- were false positives, we merely claim the original results do not support cumulative research by early-career researchers under the constrained conditions we tested. -->

We opened  with a question about what an early-career psychology researcher should do given a failed replication: should they try again or give up and move on?
In our sample, the odds of a re-replication working are low [consistent with @ebersole2020].
Especially if there is not a clear, identifiable candidate for replication failure, it may be more efficient to select another result to build on.

# Acknowledgements {.unnumbered}

TODO

# Author Contributions {.unnumbered}

TODO

# References {.unnumbered}

<!-- Use this magic to place references here. -->

::: {#refs}
:::
